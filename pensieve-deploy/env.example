# Pensieve Production Environment
# Copy to .env and edit values:
#   cp env.example .env
#   nano .env

# ═══════════════════════════════════════════════════════════════════════════
# Domain / Reverse Proxy
# ═══════════════════════════════════════════════════════════════════════════
# For local development, use localhost (HTTP only)
# For production, use your domain (Caddy will auto-provision HTTPS)
DOMAIN=localhost
# DOMAIN=pensieve.example.com

# ═══════════════════════════════════════════════════════════════════════════
# ClickHouse
# ═══════════════════════════════════════════════════════════════════════════
CLICKHOUSE_URL=http://localhost:8123
CLICKHOUSE_DB=nostr

# Password for the read-only 'grafana' user (used by Grafana dashboards)
# Generate a secure password: openssl rand -base64 24
CLICKHOUSE_GRAFANA_PASSWORD=changeme

# ═══════════════════════════════════════════════════════════════════════════
# Ingester (when implemented)
# ═══════════════════════════════════════════════════════════════════════════
ROCKSDB_PATH=/data/rocksdb
ARCHIVE_PATH=/archive/segments
SEGMENT_SIZE=268435456  # 256 MB

# ═══════════════════════════════════════════════════════════════════════════
# Storage Box (for remote archive sync)
# ═══════════════════════════════════════════════════════════════════════════
STORAGE_BOX_HOST=uXXXXXX.your-storagebox.de
STORAGE_BOX_USER=uXXXXXX
STORAGE_BOX_PATH=pensieve/archive

# How many days to keep segments locally before allowing deletion
LOCAL_RETENTION_DAYS=30

# Disk usage threshold (%) to trigger cleanup of old local segments
DISK_CLEANUP_THRESHOLD=80

# ═══════════════════════════════════════════════════════════════════════════
# Monitoring (optional)
# ═══════════════════════════════════════════════════════════════════════════
# GRAFANA_PASSWORD=changeme

# ═══════════════════════════════════════════════════════════════════════════
# Backfill (for S3 source)
# ═══════════════════════════════════════════════════════════════════════════
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_REGION=us-east-1
# S3_BUCKET=
# S3_PREFIX=

